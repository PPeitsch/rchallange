"0","# Calculate drawdowns for selected companies"
"0","for_drawdown <- select(selected_data, stock_symbol, date, close)"
"0","for_drawdown_xts_list <- for_drawdown %>%"
"0","  group_by(stock_symbol) %>%"
"0","  arrange(stock_symbol, date) %>%"
"0","  group_map(~ xts(.x$close, order.by = .x$date), .keep = TRUE)"
"0",""
"0","# Plot drawdowns for each company"
"0","drawdown_plots <- lapply(seq_along(drawdowns_list), function(i) {"
"0","  plot_drawdown(drawdowns_list[[i]], names(drawdowns_list)[i])"
"0","})"
"0",""
"0","# Arrange drawdown plots in a grid"
"0","grid.arrange(grobs = drawdown_plots, ncol = 2)"
"0",""
